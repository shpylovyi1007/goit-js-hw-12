{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport const perPage = 15;\n\nconst userGallery = async (userSearch, myPage) => {\n    const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: '43654443-0aa2ac279d0400a8e119738dd',\n            q: userSearch,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: perPage,\n            page: myPage\n        }\n    })\n    return response.data;\n};\n\nexport default userGallery;\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst gallery = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\nconst addImages = response => {\n    const galleryList = response.hits.map(image => {\n        return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=${image.largeImageURL}>\n                <img\n                    src=${image.webformatURL}\n                    alt=${image.tags}\n                />\n            </a>\n                 <div>\n                <p>Likes ${image.likes}</p>\n                <p>Views ${image.views}</p>\n                <p>Comments ${image.comments}</p>\n                <p>Downloads ${image.downloads}</p>\n            </div>\n                </li>`\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', galleryList);\n    lightbox.refresh();\n};\nexport default addImages;\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport userGallery from \"./js/pixabay-api\";\nimport addImages from \"./js/render-functions\";\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btn = document.querySelector('.load');\nbtn.style.display = 'none';\nimport { perPage } from \"./js/pixabay-api\";\nlet myPage = 1;\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    const userSearch = event.target.elements.search.value.trim();\n    loader.style.display = 'flex';\n    gallery.innerHTML = '';\n    try {\n        const response = await userGallery(userSearch, myPage);\n        if (response.hits.length === 0) {\n            btn.style.display = 'none';\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            })\n        } else {\n            addImages(response)\n            const scroll = () => {\n                const galleryItem = document.querySelector('.gallery-item');\n                const itemHeight = galleryItem.getBoundingClientRect().height;\n                window.scrollBy({\n                    top: itemHeight * 2,\n                    behavior: 'smooth'\n                });\n            };\n            scroll();\n\n            btn.style.display = 'flex';\n            const totalPages = Math.ceil(response.totalHits / perPage);\n\n            btn.addEventListener('click', async () => {\n                if (myPage > totalPages) {\n                    return iziToast.error({\n                        position: \"topRight\",\n                        message: \"We're sorry, there are no more posts to load\"\n                    });\n                }\n                btn.style.display = 'none';\n                loader.style.display = 'flex';\n                myPage += 1;\n                try {\n                    const response = await userGallery(userSearch, myPage);\n                    addImages(response)\n                    scroll();\n                } catch (error) {\n                    console.log(error);\n                } finally {\n                    loader.style.display = 'none';\n                }\n            });\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\n\n"],"names":["perPage","userGallery","userSearch","myPage","axios","gallery","lightbox","SimpleLightbox","addImages","response","galleryList","image","form","loader","btn","event","iziToast","scroll","itemHeight","totalPages","error"],"mappings":"owBACO,MAAMA,EAAU,GAEjBC,EAAc,MAAOC,EAAYC,KAClB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUF,EACV,KAAMG,CACT,CACT,CAAK,GACe,KCbdE,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC5C,aAAc,MACd,aAAc,GAClB,CAAC,EAED,MAAMC,EAAYC,GAAY,CAC1B,MAAMC,EAAcD,EAAS,KAAK,IAAIE,GAC3B;AAAA,2CAC4BA,EAAM,aAAa;AAAA;AAAA,0BAEpCA,EAAM,YAAY;AAAA,0BAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,2BAITA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,8BACRA,EAAM,QAAQ;AAAA,+BACbA,EAAM,SAAS;AAAA;AAAA,sBAGzC,EAAE,KAAK,EAAE,EACVN,EAAQ,mBAAmB,YAAaK,CAAW,EACnDJ,EAAS,QAAO,CACpB,ECxBMM,EAAO,SAAS,cAAc,MAAM,EACpCP,EAAU,SAAS,cAAc,UAAU,EAC3CQ,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAM,SAAS,cAAc,OAAO,EAC1CA,EAAI,MAAM,QAAU,OAEpB,IAAIX,EAAS,EAEbS,EAAK,iBAAiB,SAAU,MAAMG,GAAS,CAC3CA,EAAM,eAAc,EACpB,MAAMb,EAAaa,EAAM,OAAO,SAAS,OAAO,MAAM,OACtDF,EAAO,MAAM,QAAU,OACvBR,EAAQ,UAAY,GACpB,GAAI,CACA,MAAMI,EAAW,MAAMR,EAAYC,EAAYC,CAAM,EACrD,GAAIM,EAAS,KAAK,SAAW,EACzBK,EAAI,MAAM,QAAU,OACpBE,EAAS,KAAK,CACV,QAAS,0EACzB,CAAa,MACE,CACHR,EAAUC,CAAQ,EAClB,MAAMQ,EAAS,IAAM,CAEjB,MAAMC,EADc,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OACvD,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAC9B,CAAiB,CACjB,EACYD,IAEAH,EAAI,MAAM,QAAU,OACpB,MAAMK,EAAa,KAAK,KAAKV,EAAS,UAAYT,CAAO,EAEzDc,EAAI,iBAAiB,QAAS,SAAY,CACtC,GAAIX,EAASgB,EACT,OAAOH,EAAS,MAAM,CAClB,SAAU,WACV,QAAS,8CACjC,CAAqB,EAELF,EAAI,MAAM,QAAU,OACpBD,EAAO,MAAM,QAAU,OACvBV,GAAU,EACV,GAAI,CACA,MAAMM,EAAW,MAAMR,EAAYC,EAAYC,CAAM,EACrDK,EAAUC,CAAQ,EAClBQ,GACH,OAAQG,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACrC,QAA0B,CACNP,EAAO,MAAM,QAAU,MAC1B,CACjB,CAAa,CACJ,CACJ,OAAQO,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACNP,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC"}